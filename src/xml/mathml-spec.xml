<?xml version="1.0" ?>
<!-- $Id: mathml-spec.xml,v 1.291 2015/04/03 14:38:32 dcarlis Exp $ -->
<!DOCTYPE spec SYSTEM  "../pubtext/mathmlspec.dtd" [

<!-- entities for front-matter -->
<!ENTITY pub.mail      "www-math@w3.org"> 
<!ENTITY date.day      "26">
<!ENTITY date.month    "January"> 
<!ENTITY date.monthnum "01"> 
<!ENTITY date.year     "2019"> 
<!ENTITY doc.date      "&date.year;&date.monthnum;&date.day;"> 
<!ENTITY doc.prefix    "WD-MathML4-">
<!ENTITY doc.type      "Working Draft">
<!ENTITY tr.url        "https://www.w3.org/TR">
<!ENTITY this.url      "&tr.url;/&date.year;/&doc.prefix;&doc.date;/"> 
<!ENTITY latest.url    "&tr.url;/MathML4/">
<!ENTITY editors.url   "https://w3c.github.io/mathml/">
<!ENTITY latest.loc    "<loc href='&latest.url;'>&latest.url;</loc>">



<!-- entities for embedding -->
<!ENTITY introduction        SYSTEM "introduction.xml"        >
<!ENTITY fundamentals        SYSTEM "fundamentals.xml"        >
<!ENTITY presentation-markup SYSTEM "presentation-markup.xml" >
<!ENTITY content-markup      SYSTEM "contm-new.xml"           >
<!ENTITY mixing              SYSTEM "mixing.xml"              >
<!ENTITY character-set       SYSTEM "character-set.xml"       >
<!ENTITY world-interactions  SYSTEM "world-interactions.xml"   >
<!ENTITY parsing             SYSTEM "parsing.xml"             >
<!ENTITY media-types         SYSTEM "media-types.xml"         >
<!ENTITY operator-dict       SYSTEM "operator-dict.xml"       >
<!ENTITY glossary            SYSTEM "glossary.xml"            >
<!ENTITY contributors        SYSTEM "contributors.xml"        >
<!ENTITY changes             SYSTEM "changes.xml"             >
<!ENTITY references          SYSTEM "references.xml"          >
<!ENTITY normreferences      SYSTEM "normreferences.xml"          >
<!ENTITY index               SYSTEM "mathml-index.xml"        >


]>

<!-- role="editors-copy"-->
<spec w3c-doctype="wd"  role="editors-copy">
<!--<spec w3c-doctype="rec">-->
<header>
<title>Mathematical Markup Language (MathML) Version 4.0</title>
<w3c-designation>&doc.prefix;&doc.date;</w3c-designation>
<w3c-doctype>W3C &doc.type;</w3c-doctype>
<pubdate><day>&date.day;</day> <month>&date.month;</month> <year>&date.year;</year>
</pubdate>
<publoc>
<!-- <loc href="&this.url;">&this.url;</loc>-->
<loc href="&editors.url;">&editors.url;</loc>
</publoc>

<altlocs>
<loc href="Overview-d.html">diff marked HTML version</loc>
 <loc href="Overview.xml">XHTML+MathML version</loc>
 <loc href="mathml.html">single page HTML5+MathML version</loc>
 <loc href="mathml.pdf">PDF version</loc>
<!--
 <loc href="mathml-s.pdf">PDF (screen formatted) version</loc>
 <loc href="mathml-source.zip">zip archive of XML sources and stylesheets</loc>
 <loc href="mathml-html.zip">zip archive of (X)HTML documents</loc>
-->
</altlocs>

<latestloc>
&latest.loc;
</latestloc>
<latestloc role="rec">
<loc href="&tr.url;/MathML/">&tr.url;/MathML/</loc>
</latestloc>
<prevlocs>
<loc href="https://www.w3.org/TR/2014/REC-MathML3-20140410/">https://www.w3.org/TR/2014/REC-MathML3-20140410/</loc>
<!--<loc href="https://www.w3.org/TR/2010/REC-MathML3-20101021/">https://www.w3.org/TR/2010/REC-MathML3-20101021/</loc>-->
</prevlocs>
<edlocs>
<loc href="&editors.url;">&editors.url;</loc>
</edlocs>
<!--
<authlist>
<author role="editor">
<name>David Carlisle</name>
<affiliation>NAG</affiliation>
</author>
<author role="editor">
<name>Patrick Ion</name>
<affiliation>Mathematical Reviews, American Mathematical Society</affiliation>
</author>
<author role="editor">
<name>Robert Miner (deceased)</name>
<affiliation>Design Science, Inc.</affiliation>
</author>
</authlist>
-->

<authlist id="authors">
<author>
<name>Ron Ausbrooks</name>
<affiliation>MacKichan Software</affiliation>
</author>
<!--<author>
<name>Bert Bos</name>
<affiliation>W3C/ERCIM</affiliation>
</author>
-->
<author>
<name>Stephen Buswell</name>
<affiliation>Stilo Technologies</affiliation>
</author>
<!--
<author>
<name>Olga Caprotti</name>
<affiliation>University of Helsinki</affiliation>
</author>
-->
<author role="editor">
<name role="4328">David Carlisle</name>
<affiliation>NAG</affiliation>
</author>
<author>
<name>Giorgi Chavchanidze</name>
<affiliation>Opera Software</affiliation>
</author>
<!--
<author>
<name>Ananth Coorg</name>
<affiliation>The Boeing Company</affiliation>
</author>
-->
<author>
<name>St&eacute;phane Dalmas</name>
<affiliation>INRIA, Sophia Antipolis</affiliation>
</author>
<author>
<name>Stan Devitt</name>
<affiliation>Agfa-Gevaert N. V.</affiliation>
</author>
<author>
<name>Angel Diaz</name>
<affiliation>IBM Research Division, Yorktown Heights, NY</affiliation>
</author>
<author>
<name>Sam Dooley</name>
<affiliation>Integre Technical Publishing Co., Inc., Albuquerque, NM</affiliation>
</author>
<author>
<name>Roger Hunter</name>
<affiliation>MacKichan Software</affiliation>
</author>
<!--
<author>
<name>Margaret Hinchcliffe</name>
<affiliation>Waterloo Maple Inc.</affiliation>
</author>
-->
<author role="editor">
<name>Patrick Ion</name>
<affiliation>Mathematical Reviews, American Mathematical Society</affiliation>
</author>
<author>
<name>Michael Kohlhase</name>
<affiliation>German Research Centre for Artificial Intelligence (DFKI) &amp; Jacobs University Bremen</affiliation>
</author>
<author>
<name>Azzeddine Lazrek</name>
<affiliation>University of Marrakech</affiliation>
</author>
<!--
<author>
<name>Dennis Leas</name>
<affiliation>DAISY Consortium</affiliation>
</author>
-->
<author>
<name>Paul Libbrecht</name>
<affiliation>German Research Centre for Artificial Intelligence (DFKI)</affiliation>
</author>
<!--
<author>
<name>Manolis Mavrikis</name>
<affiliation>University of Edinburgh</affiliation>
</author>
-->
<author>
<name>Bruce Miller</name>
<affiliation>National Institute of Standards (NIST)</affiliation>
</author>
<author role="editor">
<name>Robert Miner (deceased)</name>
<affiliation>Design Science, Inc.</affiliation>
</author>
<author>
<name>Chris Rowley</name>
<affiliation>The Open University, UK</affiliation>
</author>
<author>
<name>Murray Sargent</name>
<affiliation>Microsoft Corporation</affiliation>
</author>
<!--
<author>
<name>Kyle Siegrist</name>
<affiliation>Mathematical Association of America</affiliation>
</author>
-->
<author>
<name>Bruce Smith</name>
<affiliation>Wolfram Research</affiliation>
</author>
<author>
<name>Neil Soiffer</name>
<affiliation>Design Science, Inc.</affiliation>
</author>
<author>
<name>Robert Sutor</name>
<affiliation>IBM Research Division, Yorktown Heights, NY</affiliation>
</author>
<author>
<name>Stephen Watt</name>
<affiliation>University of Western Ontario</affiliation>
</author>
<!--
<author>
<name>Mohamed Zergaoui</name>
<affiliation>Innovimax</affiliation>
</author>
-->
</authlist>

<errataloc href="https://www.w3.org/Math/Documents/mathml3-errata.html"/>
<translationloc href="https://www.w3.org/2005/11/Translations/Query?titleMatch=MathML3"/>


<status id="status">


<p><emph> This section describes the status of this document at the time
of its publication. Other documents may supersede this document. A
list of current W3C publications and the latest revision of this
technical report can be found in the <loc
href="https://www.w3.org/TR/">W3C technical reports index</loc> at
https://www.w3.org/TR/.</emph>
</p> 

<p>
This document was produced by the <loc
href="https://www.w3.org/Math/">W3C Math Working Group</loc> as
a <loc href="https://www.w3.org/Consortium/Process/tr#RecsW3C">Recommendation</loc>
and is part of the
W3C <loc href="https://www.w3.org/Math/Activity">Math Activity</loc>.
The goals of the W3C Math Working Group are discussed in the <loc
href="https://www.w3.org/Math/Documents/Charter2006.html"> W3C Math WG
Charter</loc> (revised July 2006).  The authors of this document are 
the W3C Math Working Group members.  A list of <intref
ref="contributors">participants in the W3C Math Working Group</intref>
is available.
</p>


<p>This document has been reviewed by W3C Members, by software
developers, and by other W3C groups and interested parties, and is
endorsed by the Director as a W3C Recommendation. It is a stable
document and may be used as reference material or cited from another
document. W3C's role in making the Recommendation is to draw attention
to the specification and to promote its widespread deployment. This
enhances the functionality and interoperability of the Web.</p>

<!--
<p>Publication as a Proposed Edited Recommendation does not imply endorsement by the W3C Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p>-->

<p>
<!--W3C asks members of the Advisory Committee to review this document
and fill in the <loc href="https://www.w3.org/2002/09/wbs/33280/">
review form.</loc> The deadline for this is 11 March 2014. The document did not
undergo Candidate Recommendation review, because no normative changes were made other
than minor fixes to reported problems with the MathML schema. -->All reported errata to
the first edition have been addressed in this addition, and a full change log appears in
<specref ref="changes"/>. The diff-marked version linked in the frontmatter highlights all changes between the first and second editions. In addition to incorporating errata, the main change in this addition is to recognise that MathML parsing is also specified in <bibref ref="HTML5"/> and where necessary to note where HTML and XML usage differ.
</p>

<p>
The Working Group maintains a comprehensive 
<loc href="https://www.w3.org/Math/testsuite/">Test Suite</loc>.  This 
is publicly available and developers are encouraged to submit their results for display.  
The <loc href="https://www.w3.org/Math/testsuite/results/tests.html">Test Results</loc> 
are public.  They show at least two interoperable implementations for each 
essential test. Further details may be found in the 
<loc href="https://www.w3.org/Math/Documents/mml3-implementation-report.html">Implementation Report</loc>.</p>


<!--
<p>Closely associated with the MathML 3.0 specification is 
<loc href="https://www.w3.org/TR/mathml-for-css/">A MathML for CSS Profile</loc>
which was simultaneously published as a Recommendation.  This 
describes a profile of MathML 3.0 that can be well formatted with Cascading Style Sheets.  No revision of the CSS Profile is being made.

</p>
-->

<p>
The MathML 2.0 (Second Edition) specification has been a W3C
Recommendation since 2001.  After its
recommendation, a W3C Math Interest Group collected 
reports of  experience
with the deployment of MathML and identified issues with MathML that
might be ameliorated.  The rechartering of a Math Working Group
did not signal any change in the overall design of MathML.
The major additions in MathML 3 are support for
bidirectional layout, better linebreaking and explicit positioning,
elementary math notations, and a new strict content MathML vocabulary
with well-defined semantics.  The MathML 3 Specification has also been
restructured. 
</p>

<p> This document was produced by a group operating under 
the <loc href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</loc>. W3C maintains a 
<loc role="disclosure" href="https://www.w3.org/2004/01/pp-impl/35549/status">public list of any patent disclosures</loc> made in connection with 
the deliverables of the group; that page also includes instructions 
for disclosing a patent. An individual who has actual knowledge of 
a patent which the individual believes contains 
<loc href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</loc> 
must disclose the information in accordance with 
<loc href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</loc>.</p>

<p>Public discussion of MathML and issues of support through the W3C
for mathematics on the Web takes place on <loc
href="mailto:&pub.mail;"> the public mailing list of the Math Working
Group</loc> (<loc
href="https://lists.w3.org/Archives/Public/www-math/">list archives</loc>).
To subscribe send an email to <loc
href="mailto:www-math-request@w3.org">www-math-request@w3.org</loc>
with the word <code>subscribe</code> in the subject line.
<phrase diff="add">Alternatively, report  an issue at this specification's
<loc href="https://github.com/w3c/mathml">GitHub repository</loc>.</phrase>
</p>


<p>
The basic chapter structure of this document is based on the earlier
MathML 2.0 Recommendation <bibref ref="MathML2"/>.  That MathML 2.0
itself was a revision of the earlier W3C Recommendation MathML 1.01
<bibref ref="MathML1"/>; MathML 3.0 is a revision of the W3C
Recommendation MathML 2.0.  It differs from it in that all previous
chapters have been updated, some new
elements and attributes added and some
deprecated.  
Much has been moved to separate documents containing explanatory
material, material on characters and entities and on the MathML DOM.
The discussion of character entities has led to the document
<emph>XML Entity Definitions for Characters</emph> <bibref ref="Entities"/>,
which is now <phrase>a W3C Recommendation</phrase>.  The concern with 
use of CSS with MathML has led to the document <emph>A MathML for CSS Profile</emph> 
<bibref ref="MathMLforCSS"/>, which was  a W3C Recommendation 
accompanying MathML 3.0.
<!--  A current list of <loc href="#openissues">open issues</loc>, pointing
into the relevant places in the draft, follows the Table of
Contents.-->
</p>

<p>
The biggest differences from MathML 2.0 (Second Edition) are in Chapters 4 and 5, although there have been
smaller improvements throughout the specification.  A more detailed
description of changes from the previous Recommendation follows.
</p>

<ulist>
<item>
<p>
Much of the non-normative explication
that formerly was found in Chapters 1 and 2, and many examples from
elsewhere in the previous MathML specifications, were removed
from the MathML3 specification and planned to be incorporated into a MathML Primer
to be prepared as a separate document.  It is expected this will help
the use of this formal MathML3 specification as a reference document
in implementations, and offer the new user better help in
understanding MathML's deployment. The remaining content of Chapters 1
and 2 has been edited to reflect the changes elsewhere in the
document, and in the rapidly evolving Web environment. Some of the
text in them went back to early days of the Web and XML, and its
explanations are now commonplace.
</p>
</item>

<item>
<p>
Chapter 3, on presentation-oriented markup, adds new material on linebreaking,
and on markup for elementary math notations used in many
countries (<el>mstack</el>, <el>mlongdiv</el> and other 
associated elements). Other changes include revisions to 
the <el>mglyph</el>, <el>mpadded</el> and <el>maction</el> 
elements and significant unification and cleanup of attribute 
values.
Earlier work, as recorded in the W3C Note <loc
href="https://www.w3.org/TR/2006/NOTE-arabic-math-20060131/">Arabic
mathematical notation</loc>, has allowed clarification of the
relationship with bidirectional text and examples
with RTL text have been added.
</p>
</item>

<item>
<p>
Chapter 4, on content-oriented markup, contains major changes and additions.
The  meaning of the actual content remains as before in principle, 
but a lot of work has been done on expressing it better. A few new elements have been added.
</p>
</item>

<item>
<p>
Chapter 5 has been refined as its purpose has been further
clarified to deal with the mixing of markup languages.  This chapter deals,
in particular, with interrelations of parts of the
MathML specification, especially with presentation and content
markup.
</p>
</item>

<item>
<p>
Chapter 6 is a new addition which deals with the issues of interaction
of MathML with a host environment.  This chapter deals with interrelations 
of  the MathML specification with XML and HTML, but in the context of deployment
on the Web.  In particular there is a discussion of the interaction of CSS
with MathML.
</p>
</item>

<item>
<p>
Chapter 7 replaces the previous Chapter 6, and has been rewritten 
and reorganized to reflect the new
situation in regard to Unicode, and the changed
W3C context with regard to named character entities.  The
<phrase>new W3C specification <emph>XML Entity Definitions for 
Characters</emph>, which  incorporates those used for mathematics has
become a  <phrase>a W3C Recommendation,</phrase> <bibref ref="Entities"/></phrase>.</p>
</item>

<item>
<p> 
The Appendices, of which there are eight shown, have been 
reworked.  
Appendix A now contains the new RelaxNG schema
for MathML3 as well as discussion of MathML3 DTD issues.
Appendix B addresses media types associated with MathML and
implicitly constitutes a request for the registration of three new ones,
as is now standard for work from the W3C.
Appendix C contains a new simplified and reconsidered Operator Dictionary.
Appendices D, E, F, G and H contain similar non-normative material to
that in the previous specification, now appropriately updated.
</p>
</item>

<item>
<p> 
A fuller discussion of the document's evolution can be found in 
<specref ref="changes"/>. 
</p>
</item>
</ulist>

</status>

<abstract id="abstract">

<p>
This specification defines the Mathematical Markup Language, or
<termdef id="td-mathml" term="mathml">MathML</termdef>. MathML is <phrase>a markup language</phrase>
for describing mathematical notation and capturing
both its structure and content. The goal of MathML is to enable
mathematics to be served, received, and processed on the World Wide
Web, just as <termdef id="td-html" term="html">HTML</termdef> has
enabled this functionality for text.
</p>

<p>
This specification of the markup language MathML is intended
primarily for a readership consisting of those who will be
developing or implementing renderers or editors using it, or
software that will communicate using MathML as a protocol for input
or output. It is <emph>not</emph> a User's Guide but rather a
reference document.
</p>

<p>
MathML can be used to encode both mathematical notation and
mathematical content. About thirty-eight of the MathML tags describe
abstract notational structures, while another about one hundred and
seventy provide a way of unambiguously specifying the intended
meaning of an expression. Additional chapters discuss how the MathML
content and presentation elements interact, and how MathML renderers
might be implemented and should interact with browsers. Finally,
this document addresses the issue of special characters used for
mathematics, their handling in MathML, their presence in Unicode,
and their relation to fonts.
</p>

<p>
While MathML is human-readable, authors typically will
use equation editors, conversion
programs, and other specialized software tools to generate
MathML. Several versions of such MathML tools exist,
both freely available software and commercial
products, and more are under development.
</p>

<p>MathML was originally specified as an XML application and most of the
examples in this specification assume that syntax. Other syntaxes are possible most notably
<bibref ref="HTML5"/> specifies the syntax for MathML in HTML. Unless explictly noted,
the examples in this specification are also valid HTML syntax.</p>

</abstract>

<langusage>
<language id="en">English</language>
</langusage>
<revisiondesc>
<p>This is revision 3.0 of MathML.</p>
</revisiondesc>
</header>

<body>
&introduction;
&fundamentals;
&presentation-markup;
&content-markup;
&mixing;
&world-interactions;
&character-set;
</body>

<back>
<!-- normative appendices -->
&parsing;
&media-types;
&operator-dict;
&glossary;
&contributors;
&changes;
&normreferences;
&references;
&index;
</back>
</spec>



<!-- LocalWords:  Carlisle Ausbrooks MacKichan Bos ERCIM Buswell Stilo Caprotti -->
<!-- LocalWords:  Chavchanidze Ananth Coorg phane Dalmas INRIA Antipolis Devitt -->
<!-- LocalWords:  Agfa Gevaert Diaz Integretech Hinchcliffe Azzeddine Lazrek WG -->
<!-- LocalWords:  Marrakech Libbrecht Manolis Mavrikis NIST Siegrist Soiffer -->
<!-- LocalWords:  Sutor Zergaoui Innovimax WG's mstack mlongdiv mglyph mpadded -->
<!-- LocalWords:  maction RTL DTD
-->

