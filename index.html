<!DOCTYPE html>
<html>
 <head>
  <meta charset='UTF-8'/>
  <title>Mathematical Markup Language (MathML) Version 4.0</title>
  <script
      src='https://www.w3.org/Tools/respec/respec-w3c'
      class='remove'>
  </script>
  <script src="sorttable.js"></script>
  <script class='remove'>
    function relaxhl (r,s,u) {
	var s2=s.replaceAll(/(#[^\n]*)/g,'\x3cspan style="color:brown">$1\x3c/span>');
	s2=s2.replaceAll(/([a-z0-9A-Z-]+)(\s*=\s*[^"])/g,'\x3cb>$1\x3c/b>$2');
	s2=s2.replaceAll(/include *"([^"]*)"/g,'\x3cspan style="color:green">include\x3c/span> "\x3cspan style="color:red">$1\x3c/span>"');
	return  s2;
    }
    function getsec(n){
	if(n==null || n.localName=="section" || n.localName=="") {
	    return n
	} else {
	    return getsec(n.parentNode);
	}
    }
    function mmlindex() {
	dl=document.getElementById("mml_elements");
	var ellist=document.querySelectorAll("code.element");
	var ellist2 = [];
	for(var i=0;i!=ellist.length;i++){
	    ellist2[ellist2.length]=ellist[i];
	}
	var lastel="";
	ellist2 = ellist2.sort(function(a,b) {return a.textContent.localeCompare(b.textContent);});
	for(var i=0;i!=ellist2.length;i++){
	    if(ellist2[i].textContent != lastel){
		lastel=ellist2[i].textContent;
		var dt=document.createElement("dt");
		var dd=document.createElement("dd");
		var lastsec=""
		dt.textContent=lastel;
		dl.appendChild(dt);
		dl.appendChild(dd);
	    }
	    var a=document.createElement("a");
	    var thissec=getsec(ellist2[i]);
	    if(thissec != null) {
		var h=thissec.children[0].children[0];
		if(h.id!=lastsec){
		    lastsec=h.id;
		    a.href="#" + h.id;
		    a.textContent=h.innerText;
		    dd.appendChild(a);
		    dd.appendChild(document.createTextNode(' '));
		}
	    }
	}
    }
    function foldable() {
	var sortlist=document.querySelectorAll("section.fold");
	for(var i=0;i!=sortlist.length;i++){
	    var d=document.createElement("details");
	    var w=sortlist[i].children[0];
	    var h=w.children[0];
	    var a=w.children[1];
	    d.id= sortlist[i].id;
	    d.className=h.nodeName;
	    sortlist[i].removeChild(w);
	    d.innerHTML="\x3csummary id='" + h.id + "' class='" + h.nodeName + "'>"+
            a.outerHTML +" " +
	    h.innerText+"\x3c/summary>"+sortlist[i].innerHTML;
	    sortlist[i].parentNode.replaceChild(d,sortlist[i]);
	}
    }
    function resortable () {
        sorttable.makeSortable(document.getElementById('oper-dict-table'));
    }
    function showcore (){
	var mmllist=document.querySelectorAll("div.example.mathml");
	for(var i=0;i!=mmllist.length;i++){
	    var m=document.createElementNS("http://www.w3.org/1998/Math/MathML","math");;
	    m.style.backgroundColor='lightgreen';
	    m.style.padding='.5em';
	    m.innerHTML=mmllist[i].textContent;
	    mmllist[i].parentNode.insertBefore(m,mmllist[i].nextSibling);
	}
    }
	
      </script>
  <script class='remove'>
   var respecConfig = {
   copyrightStart: 1998,
   specStatus: "ED",
   group: "math",
   editors: [{
   name: "David Carlisle",
   company: "NAG",
   url: "https://github.com/davidcarlisle",
   }],
   formerEditors: [{
   name: "Patrick Ion"
   }, {
   name: "Robert Miner (deceased)"
   }],        edDraftURI: "https://github.com/w3c/mathml",
   shortName: "MathML4",
   maxTocLevel: 4,
   otherLinks: [
    {
      key: "Latest MathML Recommendation",
      data: [
        {
          value: "https://www.w3.org/TR/MathML/",
          href: "https://www.w3.org/TR/MathML/",
          }]
	  }
	  ],
       github: "https://github.com/w3c/mathml",
       postProcess: [mmlindex,foldable,resortable,showcore],
   localBiblio: {     
	      "MathML-Core": {
		  title: "MathML Core",
		                    authors: [
                      "Frédéric Wang, et al."
                  ],
                  status: "ED",
                  href: "https://w3c.github.io/mathml-core/"
	      },
   "Pierce1961": {title: "Pierce1961"},
   "Cajori1928": {title: "Cajori1928"},
   "Knuth1986": {title: "Knuth1986"},
   "AAP-math": {title: "AAP-math"},
   "Poppelier1992": {title: "Poppelier1992"},
   "ISO-12083": {title: "ISO-12083"},
       "MathML1": {title: "MathML1"},
   "MathML-Core" : {"aliasOf": "mathml-core"},
   "OpenMath2004": {title: "OpenMath2004"},
   "RELAX-NG": {title: "RELAX-NG"},
   "XMLSchemas": {title: "XMLSchemas"},
   "Namespaces": {title: "Namespaces"},
   "HTML4": {title: "HTML4"},
   "MathMLforCSS": {title: "MathMLforCSS"},
   "Chaundy1954": {title: "Chaundy1954"},
   "IEEE754": {title: "IEEE754"},
   "XMLSchemaDatatypes": {title: "XMLSchemaDatatypes"},
   "MathMLTypes": {title: "MathMLTypes"},
   "rdf": {title: "rdf"},
   "OMDoc1.2": {title: "OMDoc1.2"},
   "Abramowitz1977": {title: "Abramowitz1977"},
   "XHTML": {title: "XHTML"},
   "SVG1.1": {title: "SVG1.1"},
   "XHTML-MathML-SVG": {title: "XHTML-MathML-SVG"},
   "RelaxNGBook": {title: "RelaxNGBook"},
   "Modularization": {title: "Modularization"},
   "Normal": {title: "Normal"}
   }
   };
  </script>
  <script class='remove'>
    function relaxhl (r,s,u) {
	var s2=s.replaceAll(/(\n|^)([^'#\n]*)(#[^\n]*)/g,'$1$2\x3cspan style="color:brown">$3\x3c/span>');
	s2=s2.replaceAll(/([a-z0-9.A-Z-]+)(\s*=\s*[^"])/g,'\x3cb>$1\x3c/b>$2');
	s2=s2.replaceAll(/include *"([^"]*)"/g,'\x3cspan style="color:green">include\x3c/span> "\x3cspan style="color:red">$1\x3c/span>"');
	return  s2;
    }
  </script>
  <style>
th.mfont, span.mfont{
	font-family:"STIX Two Math", "Cambria Math", "STIX Math", "Asana Math", "serif";
}
th.uname {font-size:70%;}
a.coreyes::before, li span.formerLink::before {
    content: "core\2714";
    color: darkgreen;
    vertical-align: text-top;
    font-size: 70%;
    }
div.header-wrapper span.coreno::before, li.tocline span.coreno::before, table.attributes td>span.coreno::before {
    content:"core\2716";
    color: darkred;
    vertical-align: text-top;
    font-size: 70%;
    }
summary.H4 {
font-weight:bold;
color:var(--heading-text);
position:relative; left:-1em;
}
summary.H4 > a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text);}
summary.H5 {
font-style:italic;
font-weight:normal;
position:relative; left:-1em;
}
summary.H5 > a.self-link::before{content:"§";text-decoration:none;color:#555;}

details.H4, details.H5 {
    margin-top:2.5rem;
}
table.syntax {
font-size: 80%;
background-color: var(--example-bg);
padding:.2em;
}
table.syntax td {
padding:.2em;
border: solid thin;
}
table.syntax th {
text-align: left;
padding:.2em;
border: solid thin;
}
div.strict-mathml-example{
border: solid thin black;
padding: 0em .5em;
margin-top:.5em;
}
table.attributes td.attdesc { background-color:#F5F5FF; padding-left:.2em; padding-right:.2em}
table.attributes td { padding-left:0.2em; padding-right:0.2em; border: solid thin; }
table.attributes td.attname { white-space:nowrap; vertical-align:top; font-weight:bold;}
table.attributes thead {font-weight:bold;}
div.example pre {margin-top:0;margin-bottom:0;}
pre.nonumexample{
border: .5em;
padding:.5em;
border-color:var(--example-border);
border-left-style: solid;
//background: var(--example-bg);
background: #fafafa;
}
  </style>
 </head>
 <body>
  <section id='abstract'>
   <p>
    This specification defines the Mathematical Markup Language, or
    MathML. MathML is a markup language
    for describing mathematical notation and capturing
    both its structure and content. The goal of MathML is to enable
    mathematics to be served, received, and processed on the World Wide
    Web, just as [[HTML]] has
    enabled this functionality for text.
   </p>
   <p>
    This specification of the markup language MathML is intended
    primarily for a readership consisting of those who will be
    developing or implementing renderers or editors using it, or
    software that will communicate using MathML as a protocol for input
    or output. It is <em>not</em> a User's Guide but rather a
    reference document.
   </p>
   <p>
    MathML can be used to encode both mathematical notation and
    mathematical content. About thirty-eight of the MathML tags describe
    abstract notational structures, while another about one hundred and
    seventy provide a way of unambiguously specifying the intended
    meaning of an expression. Additional chapters discuss how the MathML
    content and presentation elements interact, and how MathML renderers
    might be implemented and should interact with browsers. Finally,
    this document addresses the issue of special characters used for
    mathematics, their handling in MathML, their presence in Unicode,
    and their relation to fonts.
   </p>
   <p>
    While MathML is human-readable, authors typically will
    use equation editors, conversion
    programs, and other specialized software tools to generate
    MathML. Several versions of such MathML tools exist,
    both freely available software and commercial
    products, and more are under development.   </p>
   <p>MathML was originally specified as an XML application and most of the
   examples in this specification assume that syntax. Other syntaxes are possible most
   notably
   [[HTML5]] specifies the syntax for MathML in HTML. Unless explictly noted,
   the examples in this specification are also valid HTML syntax.
   </p>
  </section>
  <section id='sotd'>
   <p><strong>This document is an editors' copy that has no official standing. (Date: 2020-10-01)</strong></p>
   <p><em> This section describes the status of this document at the time
   of its publication. Other documents may supersede this document. A
   list of current W3C publications and the latest revision of this
   technical report can be found in the <a href="https://www.w3.org/TR/">W3C technical reports index</a> at
   https://www.w3.org/TR/.</em>   </p>
   <p>
    <em>This document is currently mostly a copy of the MathML 3 spec. It exists as a starting point for a MathML 4 spec.</em>
   </p>
   <p>         For MathML 4, the <a href="https://www.w3.org/community/mathml4/">MathML refresh community group</a> plans to split the current MathML 3 spec into three separate documents:</p>
   <ul>
    <li><a href="https://w3c.github.io/mathml-core">MathML Core (Normative)</a>,</li>
    <li><a href="https://w3c.github.io/mathml">MathML Full (Normative)</a>,</li>
    <li><a href="https://mathml-refresh.github.io/notes-on-mathml">Notes on MathML (non-normative)</a>.</li>
   </ul>
   <p>MathML core is a distillation of the commonly used parts of MathML, rewritten to align with current W3C standards such as HTML and CSS. The full MathML spec maintains (mostly) backward compatibility with MathML 3. Examples of elements in MathML core include the elements for fractions, roots, scripts, limits, rows, and token elements (identifiers, numbers, operators, etc). Problematic, harder to implement, and less commonly used MathML features will make use of polyfills (likely via in part using Shadow DOM) to implement these features. Examples of features left out of MathML core but part of full MathML are <code>mfenced</code>, <code>menclose</code>, the elementary math elements, and linebreaking. Some features such as linebreaking will likely be part of a MathML Core Level 2 recommendation in the future.
   </p>
   <p> MathML 3 is a very lengthy spec. We expect the Full MathML 4 document to be considerably shorter because we intend to pull most of the informative sections into a notes document. Additionally, much of chapter on presentation MathML concerns layout, and the full spec will reference MathML Core for details on layout.
   </p>
   <p>
    The changes to the MathML 3 spec have yet to be made. However, many changes are a result of the above decision to split the spec into three parts. Hence we expect MathML Full to alter the MathML 3 spec in the following ways:
   </p>
   <ul>
    <li>Chapter 1 is mostly informative information. It will likely be shortened or eliminated, with the existing content potentially moved to a notes document.</li>
    <li>Chapter 2 discusses the syntax and grammar of MathML along with the <code>math</code> element. It will likely have a similar structure to that of MathML 3. The committee is discussing adding some semantic disambiguation to presentation MathML, and a new "subject" attribute (name not finalized) might be added to give some context to the math.</li>
    <li>Chapter 3 covers presentation MathML. This chapter will likely be significantly smaller. Much of the content will point to MathML core for a description of the layout and attributes allowed. There will be a general discussion of the relationship between MathML Full's presentation element and MathML Core's rules: MathML Full is meant to be used in situations outside of the web also, so we need to allow for none CSS-based rendering. The chapter will still include material about appropriate markup (what should be an mi, mo, mn, ...) along with a description of those elements not in MathML core. It will also likely include an "intent" attribute to help disambiguate meaning when the meaning of the presentation is not the default meaning in the context of the optional subject area.</li>
    <li>Chapter 4 is about Content MathML. At this time, there are no plans to revise Content MathML and the chapter will likely be relatively unchanged.</li>
    <li>Chapter 5 discusses mixing presentation and content markup to give meaning to presentation MathML or to give a presentation to content MathML. This is somewhat complicated and rarely used. It is informative and will move to the notes document. The MathML refresh CG feels the "subject" and "intent" attributes will likely replace this method. Those will be discussed in chapter 3. Hence, this chapter will be eliminated from the MathML Full spec.</li>
    <li>Chapters 6 and 7 contain very useful informative information on interacting with HTML, XML, etc., along with usage suggestions and warnings about specific characters. Because these are informative, these two chapters will be removed from the MathML Full spec and move to the notes.</li>
    <li>The MathML 3 spec has several appendices. No decisions on how they will be handled in the MathML 4 spec have been made yet.</li>
   </ul>
   <hr/>
   <p>
    <em>The remainder of this document has not been updated to MathML 4.</em>
   </p>
   <hr/>
   <p>
    This document was produced by the <a href="https://www.w3.org/Math/">W3C Math Working Group</a> as
    a <a href="https://www.w3.org/Consortium/Process/tr#RecsW3C">Recommendation</a>
    and is part of the
    W3C <a href="https://www.w3.org/Math/Activity">Math Activity</a>.
    The goals of the W3C Math Working Group are discussed in the <a href="https://www.w3.org/Math/Documents/Charter2006.html"> W3C Math WG
    Charter</a> (revised July 2006).  The authors of this document are
    the W3C Math Working Group members.  A list of participants in the W3C Math Working Group
    is available, [[[#contrib]]].   </p>
   <p>This document has been reviewed by W3C Members, by software
   developers, and by other W3C groups and interested parties, and is
   endorsed by the Director as a W3C Recommendation. It is a stable
   document and may be used as reference material or cited from another
   document. W3C's role in making the Recommendation is to draw attention
   to the specification and to promote its widespread deployment. This
   enhances the functionality and interoperability of the Web.
   </p>
   <p>
    All reported errata to
    the first edition have been addressed in this addition, and a full change log appears
    in
    [[[#changes]]]. The diff-marked version linked in the frontmatter highlights all changes between
    the first and second editions. </p>
   <p>
    The Working Group maintains a comprehensive
    <a href="https://www.w3.org/Math/testsuite/">Test Suite</a>.  This
    is publicly available and developers are encouraged to submit their results for display.
    The <a href="https://www.w3.org/Math/testsuite/results/tests.html">Test Results</a>
    are public.  They show at least two interoperable implementations for each
    essential test. Further details may be found in the
    <a href="https://www.w3.org/Math/Documents/mml3-implementation-report.html">Implementation Report</a>.
   </p>
   <p>
    The MathML 2.0 (Second Edition) specification has been a W3C
    Recommendation since 2001.  After its
    recommendation, a W3C Math Interest Group collected
    reports of  experience
    with the deployment of MathML and identified issues with MathML that
    might be ameliorated.  The rechartering of a Math Working Group
    did not signal any change in the overall design of MathML.
    The major additions in MathML 3 are support for
    bidirectional layout, better linebreaking and explicit positioning,
    elementary math notations, and a new strict content MathML vocabulary
    with well-defined semantics.  The MathML 3 Specification has also been
    restructured.    </p>
   <p> This document was produced by a group operating under
   the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>. W3C maintains a
   <a href="https://www.w3.org/2004/01/pp-impl/35549/status" rel="disclosure">public list of any patent disclosures</a> made in connection with
   the deliverables of the group; that page also includes instructions
   for disclosing a patent. An individual who has actual knowledge of
   a patent which the individual believes contains
   <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a>
   must disclose the information in accordance with
   <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.
   </p>
   <p>Public discussion of MathML and issues of support through the W3C
   for mathematics on the Web takes place on <a href="mailto:www-math@w3.org"> the public mailing list of the Math Working
   Group</a> (<a href="https://lists.w3.org/Archives/Public/www-math/">list archives</a>).
   To subscribe send an email to <a href="mailto:www-math-request@w3.org">www-math-request@w3.org</a>
   with the word <code>subscribe</code> in the subject line.
   Alternatively, report  an issue at this specification's
   <a href="https://github.com/w3c/mathml">GitHub repository</a>.   </p>
   <p>
     The basic chapter structure of this document is based on the earlier releases,
     [[MathML3]], [[MathML2]] and [[MathML]].
   </p>
     <p>
      A fuller discussion of the document's evolution can be found in
      [[[#changes]]].
     </p>
       <section id="issue-summary"></section>
  </section>

  <section data-include="src/introduction.html" data-include-replace="true"></section>
  <section data-include="src/fundamentals.html" data-include-replace="true"></section>
  <section data-include="src/presentation-markup.html" data-include-replace="true"></section>
  <section data-include="src/contm-new.html" data-include-replace="true"></section>
  <section data-include="src/mixing.html" data-include-replace="true"></section>
  <section data-include="src/world-interactions.html" data-include-replace="true"></section>
  <section data-include="src/character-set.html" data-include-replace="true"></section>

  <!-- respec doesn't support recusive inclusion currently-->
  <section class="appendix">
   <h2 id="parsing">Parsing MathML</h2>
   <div class="issue" data-number="268"></div>
   <div class="issue" data-number="122"></div>
   <div class="issue" data-number="178"></div>

   <section data-include="src/parsing-1.html" data-include-replace="true"></section>

   <section>
    <h3 id="parsing_usingrnc">Using the RelaxNG Schema for MathML</h3>

    <p>MathML documents should be validated using the RelaxNG Schema for MathML, either in
    the XML encoding (<a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4.rng">http://www.w3.org/Math/RelaxNG/mathml4/mathml4.rng</a>)
    or in compact notation (<a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4.rnc</a>)
    which is also shown below.</p>

    <p>In contrast to DTDs there is no in-document method to associate a RelaxNG schema with
    a document.</p>




    <section>
     <h4 id="parsing_rnc_core">MathML Core</h4>

    <p> MathML Core is specifed in the [[mathml-core]] however the Schema is developed alongside the schema for MathML&#160;4 and presented here, it can also be found at <a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4-core.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4-core.rnc</a>.</p>
     <pre class="nohighlight nonumexample" style="white-space:pre-wrap" data-oninclude="relaxhl" data-include-format='html' data-include="https://raw.githubusercontent.com/mathml-refresh/mathml-schema/main/rnc/mathml4-core.rnc" ></pre>

    </section>

    <section>
     <h4 id="parsing_rnc_pres">Presentation MathML</h4>

     <p>The grammar for Presentation MathML&#160;4 builds on the grammar for the MathML
     Core, and can be found at <a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4-presentation.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4-presentation.rnc</a>.</p>

     <pre class="nohighlight nonumexample" style="white-space:pre-wrap" data-oninclude="relaxhl" data-include-format='html' data-include="https://raw.githubusercontent.com/mathml-refresh/mathml-schema/main/rnc/mathml4-presentation.rnc" ></pre>

    </section>

    <section>
     <h4 id="parsing_rnc_strict">Strict Content MathML</h4>

     <p>The grammar for Strict Content MathML&#160;4 can be found at <a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4-strict-content.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4-strict-content.rnc</a>.</p>

     <pre class="nohighlight nonumexample" style="white-space:pre-wrap" data-oninclude="relaxhl" data-include-format='html' data-include="https://raw.githubusercontent.com/mathml-refresh/mathml-schema/main/rnc/mathml4-strict-content.rnc" ></pre>
    </section>


    <section>
     <h4 id="parsing_rnc_content">Content MathML</h4>

     <p>The grammar for Content MathML&#160;4 builds on the grammar for the Strict Content MathML
     subset, and can be found at <a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4-content.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4-content.rnc</a>.</p>

     <pre class="nohighlight nonumexample" style="white-space:pre-wrap" data-oninclude="relaxhl" data-include-format='html' data-include="https://raw.githubusercontent.com/mathml-refresh/mathml-schema/main/rnc/mathml4-content.rnc" ></pre>

    </section>

    <section>
     <h4 id="parsing_rnc_full">Full MathML</h4>

     <p>The grammar for full MathML&#160;4 is simply a merger of the above grammars,
     and can be found at <a href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4.rnc</a>.</p>

     <pre class="nohighlight nonumexample" style="white-space:pre-wrap" data-oninclude="relaxhl" data-include-format='html' data-include="https://raw.githubusercontent.com/mathml-refresh/mathml-schema/main/rnc/mathml4.rnc" ></pre>

    </section>


    <section>
     <h4 id="parsing_rnc_legacy">Legacy MathML</h4>

     <p>Some elements and attributes that were deprecated in MathML&#160;3
     are removed from MathML&#160;4.  This schema extends the full MathML&#160;4
     schema, adding these constructs back, allowing validation of existing
     MathML documents. It can be found at <a
     href="https://www.w3.org/Math/RelaxNG/mathml4/mathml4-legacy.rnc">https://www.w3.org/Math/RelaxNG/mathml4/mathml4-legacy.rnc</a>.</p>

     <pre class="nohighlight nonumexample" style="white-space:pre-wrap" data-oninclude="relaxhl" data-include-format='html' data-include="https://raw.githubusercontent.com/mathml-refresh/mathml-schema/main/rnc/mathml4-legacy.rnc" ></pre>

    </section>


   </section>

   <section data-include="src/parsing-2.html" data-include-replace="true"></section>
  </section>

  <section data-include="src/media-types.html" data-include-replace="true"></section>
  <section data-include="src/operator-dict.html" data-include-replace="true"></section>
  <section data-include="src/accessibility.html" data-include-replace="true"></section>
  <section data-include="src/mmlindex.html" data-include-replace="true"></section>
  <section data-include="src/contributors.html" data-include-replace="true"></section>
  <section data-include="src/changes.html" data-include-replace="true"></section>
  <section id='conformance'>
 </section>

</body>
</html>
